---
layout: lipu
title: leko nimi ale pi toki pona
description: leko nimi li seme? toki pona li jo e nanpa seme pi leko nimi?
date: 2021-09-13
tags:
- musi-nimi
---

leko nimi li seme?

open, la o sitelen e leko. o sitelen leko lili insa leko sama ni:

<figure>
<table class="word-square" aria-label="leko li jo ala">
  <tr><td/><td/><td/></tr>
  <tr><td/><td/><td/></tr>
  <tr><td/><td/><td/></tr>
</table>
</figure>

sina ken kepeken nanpa leko ale: 3&times;3, 1&times;1, 13&times;8, &hellip;

ni, la o alasa e kulupu nimi sama ni: sina ken pana sitelen ale pi nimi ale lon insa pi leko sama ni: linja ale pi tawa poka en linja ale pi tawa anpa li jo e nimi pini.

o lukin e ijo pi pana sona:

<figure>
<table class="word-square">
  <tr><td>o</td><td>k</td><td>o</td></tr>
  <tr><td>k</td><td>o</td><td>n</td></tr>
  <tr><td>o</td><td>n</td><td>a</td></tr>
</table>
</figure>

leko nimi li ni. kulupu nimi li jo taso e nimi "oko" e nimi "kon" e nimi "ona". sina ken pali e leko nimi tan kulupu ni.

o lukin e leko nimi ni pi toki Lasin. ni li ["leko Sato"](https://en.wikipedia.org/wiki/Sator_Square). jan mute li sona e leko nimi ni:

<figure>
<table class="word-square">
  <tr><td>s</td><td>a</td><td>t</td><td>o</td><td>r</td></tr>
  <tr><td>a</td><td>r</td><td>e</td><td>p</td><td>o</td></tr>
  <tr><td>t</td><td>e</td><td>n</td><td>e</td><td>t</td></tr>
  <tr><td>o</td><td>p</td><td>e</td><td>r</td><td>a</td></tr>
  <tr><td>r</td><td>o</td><td>t</td><td>a</td><td>s</td></tr>
</table>
</figure>

---

toki mute li jo e leko nimi mute mute mute a! toki mute, la sina ken ala nanpa e leko nimi ale ken. taso, sina ken nanpa e leko nimi ale pi toki pona a! [nimi pu](https://wikipesija.org/wiki/nimi_pu) en [nimi ku suli](https://wikipesija.org/wiki/lipu_ku#nimi_ku_suli), la sina ken alasa taso e leko nimi 18:

<figure>
<p class="heading">1 en 1 (musi ala)</p>
<table class="word-square">
  <tr><td>a</td></tr>
</table>
<table class="word-square">
  <tr><td>e</td></tr>
</table>
<table class="word-square">
  <tr><td>n</td></tr>
</table>
<table class="word-square">
  <tr><td>o</td></tr>
</table>
<p class="heading">2 en 1</p>
<table class="word-square">
  <tr><td>e</td><td>n</td></tr>
</table>
<p class="heading">3 en 1</p>
<table class="word-square">
  <tr><td>o</td><td>n</td><td>a</td></tr>
</table>
<p class="heading">4 en 1</p>
<table class="word-square">
  <tr><td>n</td><td>e</td><td>n</td><td>a</td></tr>
</table>
<p class="heading">2 en 2</p>
<table class="word-square">
  <tr><td>e</td><td>n</td></tr>
  <tr><td>n</td><td>i</td></tr>
</table>
<p class="heading">3 en 3</p>
<table class="word-square">
  <tr><td>a</td><td>l</td><td>a</td></tr>
  <tr><td>l</td><td>e</td><td>n</td></tr>
  <tr><td>a</td><td>n</td><td>u</td></tr>
</table>
<table class="word-square">
  <tr><td>a</td><td>l</td><td>a</td></tr>
  <tr><td>l</td><td>o</td><td>n</td></tr>
  <tr><td>a</td><td>n</td><td>u</td></tr>
</table>
<table class="word-square">
  <tr><td>i</td><td>j</td><td>o</td></tr>
  <tr><td>j</td><td>a</td><td>n</td></tr>
  <tr><td>o</td><td>n</td><td>a</td></tr>
</table>
<table class="word-square">
  <tr><td>i</td><td>l</td><td>o</td></tr>
  <tr><td>l</td><td>e</td><td>n</td></tr>
  <tr><td>o</td><td>n</td><td>a</td></tr>
</table>
<table class="word-square">
  <tr><td>i</td><td>l</td><td>o</td></tr>
  <tr><td>l</td><td>o</td><td>n</td></tr>
  <tr><td>o</td><td>n</td><td>a</td></tr>
</table>
<table class="word-square">
  <tr><td>o</td><td>k</td><td>o</td></tr>
  <tr><td>k</td><td>e</td><td>n</td></tr>
  <tr><td>o</td><td>n</td><td>a</td></tr>
</table>
<table class="word-square">
  <tr><td>o</td><td>k</td><td>o</td></tr>
  <tr><td>k</td><td>i</td><td>n</td></tr>
  <tr><td>o</td><td>n</td><td>a</td></tr>
</table>
<table class="word-square">
  <tr><td>o</td><td>k</td><td>o</td></tr>
  <tr><td>k</td><td>o</td><td>n</td></tr>
  <tr><td>o</td><td>n</td><td>a</td></tr>
</table>
<table class="word-square">
  <tr><td>u</td><td>t</td><td>a</td></tr>
  <tr><td>t</td><td>a</td><td>n</td></tr>
  <tr><td>a</td><td>n</td><td>u</td></tr>
</table>
<p class="heading">4 en 3</p>
<table class="word-square">
  <tr><td>l</td><td>a</td><td>s</td><td>o</td></tr>
  <tr><td>o</td><td>l</td><td>i</td><td>n</td></tr>
  <tr><td>n</td><td>e</td><td>n</td><td>a</td></tr>
</table>
</figure>

ni li ale a! tenpo lon la, leko nimi pi kulupu nimi "laso olin nena" li suli nanpa wan. ken, la tenpo kama, la nimi sin li ken e leko nimi sin.

o ante e kulupu nimi ale, li alasa e leko nimi sin:

<textarea id="input" rows="12" spellcheck="false">
# nimi ku suli
a
akesi
ala
alasa
ale
ali
anpa
ante
anu
awen
e
en
epiku
esun
ijo
ike
ilo
insa
jaki
jan
jasima
jelo
jo
kala
kalama
kama
kasi
ken
kepeken
kijetesantakalu
kili
kin
kipisi
kiwen
ko
kokosila
kon
ku
kule
kulupu
kute
la
lanpan
lape
laso
lawa
leko
len
lete
lili
linja
lipu
loje
lon
luka
lukin
lupa
ma
mama
mani
meli
meso
mi
mije
misikeke
moku
moli
monsi
monsuta
mu
mun
musi
mute
n
namako
nanpa
nasa
nasin
nena
ni
nimi
noka
o
oko
olin
ona
open
pakala
pali
palisa
pan
pana
pi
pilin
pimeja
pini
pipi
poka
poki
pona
pu
sama
seli
selo
seme
sewi
sijelo
sike
sin
sina
sinpin
sitelen
soko
sona
soweli
suli
suno
supa
suwi
tan
taso
tawa
telo
tenpo
toki
tomo
tonsi
tu
unpa
uta
utala
walo
wan
waso
wawa
weka
wile</textarea>

<output id="output"></output>

<hr>

pona o tawa jan Sewaku. ona li pana e sona alasa pi leko nimi tawa mi. o lukin
tawa
[ilo alasa ona pi leko nimi](https://github.com/shelvacu/rust-word-squares).

<style>
table.word-square {
  display: inline-table;
  margin-inline: 0.4rem;
  margin-block: 0.4rem;
  border: 0.25rem solid var(--text-color);
  border-collapse: collapse;
  filter: drop-shadow(var(--shadow));
}

table.word-square td {
  border: 0.125rem solid var(--text-color);
  width: 2.3rem;
  height: 2.3rem;
  font-family: var(--font-display);
  font-size: 2rem;
  line-height: 1;
  text-align: center;
  vertical-align: bottom;
}

.heading {
  font-family: var(--font-sans-serif);
  font-size: 1.4rem;
  font-weight: bold;
}
</style>

<script>
const input = document.getElementById("input");
const output = document.getElementById("output");
input.addEventListener("input", render);
render();

function render() {
  output.innerHTML = "";
  const lexicon = input.value
    .split("\n")
    .filter((word) => word.length && !word.startsWith("#"))
    .sort((a, b) => a.length - b.length);
  if (!lexicon.length) renderTotal(0);
  const minLength = lexicon[0].length;
  const maxLength = lexicon[lexicon.length - 1].length;
  let count = 0;
  for (let height = minLength; height <= maxLength; ++height) {
    for (let width = height; width <= maxLength; ++width) {
      const rowLex = lexicon.filter((word) => word.length == width);
      const colLex = lexicon.filter((word) => word.length == height);
      const rowMap = prefixMap(rowLex);
      const colMap = prefixMap(colLex);
      void function examine(ri, ci, rows = new Array(height).fill("")) {
        const rowPrefix = rows[ri];
        const colPrefix = rows.slice(0, ri).map((row) => row[ci]).join("");
        const rowSet = rowMap.get(rowPrefix);
        const colSet = colMap.get(colPrefix);
        if (!rowSet || !colSet) return;
        const commonSet = intersection(rowSet, colSet);
        for (const char of commonSet) {
          const newRows = rows.slice();
          newRows[ri] += char;
          if (ci < width - 1) examine(ri, ci + 1, newRows);
          else if (ri < height - 1) examine(ri + 1, 0, newRows);
          else {
            output.appendChild(makeWordSquareTable(newRows));
            ++count;
          }
        }
      }(0, 0);
    }
  }
  renderTotal(count);
}

function renderTotal(count) {
  const total = document.createElement("p");
  let determiner = count;
  switch (count) {
    case 0: determiner = "ala"; break;
    case 1: determiner = "wan"; break;
    case 2: determiner = "tu"; break;
  }
  total.textContent = `leko nimi ${determiner} li lon.`;
  output.appendChild(total);
}

function makeWordSquareTable(wordList) {
  const table = document.createElement("table");
  table.classList.add("word-square");
  for (const word of wordList) {
    const row = document.createElement("tr");
    table.appendChild(row);
    for (const char of word) {
      const cell = document.createElement("td");
      row.appendChild(cell);
      cell.innerText = char;
    }
  }
  return table;
}

function prefixMap(rowLex) {
  const map = new Map();
  for (const word of rowLex) {
    for (let i = 0; i < word.length; ++i) {
      const prefix = word.slice(0, i);
      if (!map.has(prefix)) {
        map.set(prefix, new Set());
      }
      const set = map.get(prefix);
      set.add(word[i]);
    }
  }
  return map;
}

function intersection(a, b) {
  return new Set([...a].filter((x) => b.has(x)));
}
</script>
